/*! Metropolic v1.0.0 | (c) 2019 BinaryRx | MIT License | git@bitbucket.org:klogic/metropolic_landingpage.git */
"use strict";!(function(t){if(void 0===t)return console.error("jQuery is must for sendForm plugin");function e(e,i){this.elem=e;return this.options=t.extend({url:null,method:null,crossDomain:!0,dataType:"jsonp",done:null},i),this.inputs=[],this.ok,this.click=!0,this.noBrowserValidation(),this.getFields(),this.inputsObject(),this.submit(),this}t.fn.form=function(t){return new e(this,t)},e.prototype.noBrowserValidation=function(){this.elem.attr("novalidate","novalidate")},e.prototype.getFields=function(){for(var t={},e=this.elem.find("input"),i=this.elem.find("select"),n=this.elem.find("textarea"),a=[],r=0;r<e.length;r++)a.push(e[r]);t.input=a;var o=[];for(r=0;r<i.length;r++)o.push(i[r]);t.select=o;var l=[];for(r=0;r<n.length;r++)l.push(n[r]);return t.textarea=l,this.fields=t},e.prototype.validation={israelPhone:function(t){return!!/^(02|03|04|08|09|05\d|072|073|075|076|077|078)[\-\s{1}]?\d{1}[\-\s{1}]?\d{6}$/.test(t)},checkbox:function(t){if("כן"==t)var e=1;return!!e||(alert("אנא אשר את מדיניות הפרטיות"),!1)},fullName:function(t){var e=t.trim().split(" ");if(e.length>1){for(var i=!0,n=0;n<e.length;n++)if(!(i=this.text(e[n])))return i;return i}return!1},text:function(t){return!/[!@#\$%\^&\*\[\]:;'"<>|+\\]|\d/.test(t)&&t.trim().length>1},email:function(t){return!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}},e.prototype.inputsObject=function(){var t=this.fields;for(var e in t)for(var i=0;i<t[e].length;i++){var n=t[e][i];if(n&&null!=n.name&&n.name.trim().length>0&&"submit"!=n.type){var a={name:n.name,type:"input"==e?n.type:e,value:n.value,require:!!n.hasAttribute("required"),validation:!!n.hasAttribute("validation")&&n.getAttribute("validation"),validation_text:!!n.hasAttribute("validation-text")&&n.getAttribute("validation-text"),element:n};this.inputs.push(a)}}return this.inputs},e.prototype.inputsValid=function(){for(var t=this.inputs,e=0;e<t.length;e++){var i=t[e];if(i.element&&(i.value=i.element.value),i.require)if(i.validation){var n=this.validation[i.validation](i.value);i.valid=n}else i.value.trim().length>0?i.valid=!0:i.valid=!1;else if(i.validation&&i.value.trim().length>0){n=this.validation[i.validation](i.value);i.valid=n}else i.valid=!0}},e.prototype.valid=function(){var t=this.inputs,e=function(t){t.element.classList.contains("inputError")||t.element.classList.add("inputError");var e=t.validation_text,i=t.element.value;if(t.element.hasAttribute("placeholder")){t.element.value="",e&&t.element.setAttribute("placeholder",e);var n=function(){t.element.value=i,t.element.removeEventListener("focus",n)};t.element.addEventListener("focus",n)}};this.ok=!0;for(var i=0;i<t.length;i++)t[i].valid?t[i].element&&t[i].element.classList.remove("inputError"):(e(t[i]),this.ok=!1)},e.prototype.addParam=function(e){var i=t.extend({name:null,value:null,require:!1,validation:!1},e);return null!=i.name&&this.inputs.push(i),this},e.prototype.addValidation=function(t,e){return this.validation[t]=e,this},e.prototype.ajaxObjects=function(){for(var t={},e=this.inputs,i=0;i<e.length;i++)t[e[i].name]=e[i].value;return this.ajax=t},e.prototype.submit=function(){var e=this;this.elem.on("submit",(function(i){i.preventDefault(),e.inputsValid(),e.ajaxObjects(),e.valid(),e.ok&&e.click&&(e.click=!1,t.ajax({type:e.options.method,url:e.options.url,data:e.ajax,crossDomain:e.options.crossDomain,dataType:e.options.dataType}).done((function(t){e.options.done(t)})))}))}})(jQuery);